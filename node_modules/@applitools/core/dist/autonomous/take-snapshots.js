"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.makeTakeSnapshots = void 0;
const driver_1 = require("@applitools/driver");
const populate_eyes_server_settings_1 = require("../utils/populate-eyes-server-settings");
const uniquify_environments_1 = require("../automation/utils/uniquify-environments");
function makeTakeSnapshots({ core, spec, logger: defaultLogger }) {
    return async function takeSnapshots({ target, settings, logger = defaultLogger, }) {
        (0, populate_eyes_server_settings_1.populateEyesServerSettings)(settings);
        const account = await core.base.getAccountInfo({ settings: settings, logger });
        settings.environments = (0, uniquify_environments_1.uniquifyEnvironments)(settings.environments);
        const driver = await (0, driver_1.makeDriver)({ spec, driver: target, logger });
        return core.takeSnapshots({ driver, settings, account, logger });
    };
}
exports.makeTakeSnapshots = makeTakeSnapshots;
